<div class="list container top-container">
    <div class="foback-header">
      <app-button
        [text]="'Retour'"
        [type]="'secondary'"
        [iconLeft]="'icon-go-back'"
      ></app-button>
    </div>
    <div class="sub-header container-fuil container-lg">
      <h1 class="main-title">
        Collaborateurs
      </h1>

      <div class="search d-flex">
        <div class="input-group">
          <input type="text"
                 class="form-control input"
                 placeholder="Rechercher un collaborateur"
                 (input)="getUsers()"
                 aria-describedby="basic-addon2"
                 [(ngModel)]="filter.keyword"/>
          <div class="input-group-append" id="basic-addon2">
            <i class="fa fa-search"></i>
          </div>
        </div>
      </div>
    </div>
    <div class="wrap">
        <div class="table-wrapper">
            <table class="table-responsive card-list-table">
                <thead>
                    <tr>
                        <th colspan="2">
                          <i class="icon-username"></i>
                          Nom complet</th>
                        <th>
                          <i class="icon-email"></i>
                          Email</th>
                         <th>
                           <i class="icon-phone"></i>
                           Téléphone</th>
                        <th>
                          <i class="icon-manager"></i>
                          Manager</th>
<!--                        <th class="text-center">Date de création</th>-->
<!--                        <th>Dernière activité</th>-->
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let user of users"  [routerLink]="['/users/info/'+user.id]">
                        <td colspan="2">
                          <div class="photo-cell">
                            <div class="photo">
                              <div class="img-container">
                                <img
                                  [attr.src]="user?.photo_profil ? ('document/'+user.photo_profil_id+'/file' |
                      getPhotoFromBackend: ('assets/images/'+(user.civilite === 'Mme' ? 'woman.png': 'man.png')) |
                      async) : ('assets/images/'+(user.civilite === 'Mme' ? 'woman.png': 'man.png'))"
                                />

                              </div>
                            </div>
                            <div class="name">{{user?.nom}} {{user?.prenom}}</div>
                          </div>
                        </td>
<!--                        <td data-title="Nom"></td>-->
                        <td data-title="Email" >{{user?.email}}</td>
                         <td data-title="Téléphonne">{{user?.telephone}}</td>
                        <td data-title="Manager">{{user?.manager?.nom}}</td>

<!--                        <td data-title="Date de création" class="text-center">{{user?.created_at | defaultFormat }}</td>-->
<!--                        <td data-title="Dernière activité" class="lightcell">{{user?.last_activity | timeAgo }}</td>-->
                        <td >
<!--                            appStopPropagation-->
                            <div class="actions">
                                <i class="icon-edit"
                                   data-toggle="tooltip"
                                   data-placement="top"
                                   [routerLink]="['/users/update/'+user.id]"
                                   title="Détails"></i>
                              <span class="d-none d-lg-flex">Détails</span>

<!--                                <ng-container *ngIf="!user.blocked_at; else unlock">-->
<!--                                    <i class="fa fa-lock"-->
<!--                                       data-toggle="tooltip"-->
<!--                                       data-placement="top"-->
<!--                                       (click)="askBlockUser(user.id)"-->
<!--                                       title="{{'DISABLE ACCOUNT' | translate}}"></i>-->
<!--                                </ng-container>-->
<!--                                <ng-template #unlock>-->
<!--                                    <i class="fa fa-unlock"-->
<!--                                       data-toggle="tooltip"-->
<!--                                       data-placement="top"-->
<!--                                       (click)="askUnBlockUser(user.id)"-->
<!--                                       title="{{'ENABLE ACCOUNT' | translate}}"></i>-->
<!--                                </ng-template>-->
<!--                                <i class="fa fa-trash"-->
<!--                                   (click)="archive(user.id)"-->
<!--                                   data-toggle="tooltip"-->
<!--                                   data-placement="top"-->
<!--                                   title="{{'DELETE' | translate}}"></i>-->
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<ng-template  [ngxPermissionsOnly]="['superadmin']">
    <app-floating [addTitle]="'Ajouter un utilisateur'" (onAddClick)="gotoAddUser()"></app-floating>
</ng-template>
