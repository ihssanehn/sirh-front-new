<div class="list container top-container">
<!--    <div class="foback-header">-->
<!--&lt;!&ndash;      <app-button&ndash;&gt;-->
<!--&lt;!&ndash;        [text]="'Retour'"&ndash;&gt;-->
<!--&lt;!&ndash;        [type]="'tertiary'"&ndash;&gt;-->
<!--&lt;!&ndash;        [iconLeft]="'icon-go-back'"&ndash;&gt;-->
<!--&lt;!&ndash;      ></app-button>&ndash;&gt;-->
<!--      <div class="right-buttons">-->
<!--&lt;!&ndash;        <app-button&ndash;&gt;-->
<!--&lt;!&ndash;          [text]="'Importer'"&ndash;&gt;-->
<!--&lt;!&ndash;          [type]="'tertiary'"&ndash;&gt;-->
<!--&lt;!&ndash;          [iconLeft]="'icon-file'"&ndash;&gt;-->
<!--&lt;!&ndash;          [customStyle]="{'white-space': 'nowrap'}"&ndash;&gt;-->
<!--&lt;!&ndash;        ></app-button>&nbsp;&ndash;&gt;-->
<!--&lt;!&ndash;        <app-button&ndash;&gt;-->
<!--&lt;!&ndash;          [text]="'Exporter'"&ndash;&gt;-->
<!--&lt;!&ndash;          [type]="'tertiary'"&ndash;&gt;-->
<!--&lt;!&ndash;          [iconLeft]="'icon-file'"&ndash;&gt;-->
<!--&lt;!&ndash;          [customStyle]="{'white-space': 'nowrap'}"&ndash;&gt;-->
<!--&lt;!&ndash;        ></app-button>&ndash;&gt;-->
<!--        &nbsp;-->
<!--        <app-button-->
<!--          [text]="'Ajouter un utilisateur/collaborateur'"-->
<!--          [type]="'primary'"-->
<!--          [iconLeft]="'fa fa-plus'"-->
<!--          (onClick)="openSelectRole()"-->
<!--          [customStyle]="{'white-space': 'nowrap'}"-->
<!--        ></app-button>-->
<!--      </div>-->
<!--    </div>-->
    <div class="sub-header ">
      <h1 class="main-title">
        Utilisateurs
      </h1>

      <div class="search d-flex">
        <div class="input-group">
          <input type="text"
                 class="form-control input"
                 placeholder="Rechercher un utilisateur"
                 (input)="getUsers()"
                 aria-describedby="basic-addon2"
                 [(ngModel)]="filter.keyword"/>
          <div class="input-group-append" id="basic-addon2">
            <i class="icon-search"></i>
          </div>
        </div>&nbsp;
        <app-button
          [text]="'Rechercher'"
          [type]="'primary_light'"
          [iconLeft]="'icon-search'"
          (onClick)="getUsers()"
          [customStyle]="{'white-space': 'nowrap'}"
        ></app-button>&nbsp;
        <app-button
          [text]="'Recherche avancé'"
          [iconRight]="showFilters ? 'icon-arrow-up': 'icon-arrow-down'"
          [type]="'tertiary'"
          (onClick)="showFilters = !showFilters; resetFilters()"
          [customStyle]="{'white-space': 'nowrap'}"
        ></app-button>
      </div>
      <div class="right-buttons">
        <app-button
          [text]="'Ajouter'"
          [type]="'secondary'"
          [iconRight]="'icon-add'"
          (onClick)="openSelectRole()"
          [customStyle]="{'white-space': 'nowrap'}"
        ></app-button>
      </div>
    </div>
  <div class="filter-container" *ngIf="showFilters">
    <h3 class="filter-tilte-bloc ">
      <span>Recherche avancée</span>
      <span class="reset-filters" (click)="resetFilters()">
          <i class="icon-close"></i>&nbsp;
          Réinitialiser les filtres
        </span>
    </h3>
    <div class="filtres row ">
      <div class="flex-column col-12 col-sm-6 col-lg-3  ">
        <label>Type de profil</label>
        <div>
          <ng-select class="select form-control"
                     [multiple]="true"
                     [items]="profiles"
                     (change)="filterChanged()"
                     [(ngModel)]="filter.profiles"
                     [bindLabel]="'label'"
                     [bindValue]="'id'"
                     [placeholder]="'Filtrer par profils'" ></ng-select>
        </div>
      </div>
      <div class=" flex-column  col-12 col-sm-6 col-lg-3 ">
        <label>Business line</label>
        <div>
          <ng-select class="select form-control"
                     [multiple]="true"
                     [items]="business_lines"
                     [bindLabel]="'label'"
                     [bindValue]="'id'"
                     (change)="filterChanged()"
                     [(ngModel)]="filter.business_lines"
                     [placeholder]="'Filtrer business lines'" ></ng-select>
        </div>
      </div>
      <div class=" flex-column  col-12 col-sm-6 col-lg-3 ">
        <label>Direction OP</label>
        <div>
          <ng-select class="select form-control"
                     [multiple]="true"
                     [items]="op_directions"
                     [bindLabel]="'label'"
                     [bindValue]="'id'"
                     (change)="filterChanged()"
                     [(ngModel)]="filter.op_directions"
                     [placeholder]="'Filtrer direction op'"></ng-select>
        </div>
      </div>
      <div class=" flex-column  col-12 col-sm-6 col-lg-3 ">
        <label>Business unit</label>
        <div>
          <ng-select class="select form-control"
                     [multiple]="true"
                     [items]="business_units"
                     [bindLabel]="'label'"
                     [bindValue]="'id'"
                     (change)="filterChanged()"
                     [(ngModel)]="filter.business_units"
                     [placeholder]="'Filtrer par business units'"></ng-select>
        </div>
      </div>
    </div>
    <div class="filtres row ">
      <div class="flex-column col-12 col-sm-6 col-lg-3  ">
        <label>Département</label>
        <div>
          <ng-select class="select form-control"
                     [multiple]="true"
                     [items]="departments"
                     (change)="filterChanged()"
                     [(ngModel)]="filter.departments"
                     [bindLabel]="'label'"
                     [bindValue]="'id'"
                     [placeholder]="'Filtrer par département'" ></ng-select>
        </div>
      </div>
      <div class=" flex-column  col-12 col-sm-6 col-lg-3 ">
        <label>Centre de profit</label>
        <div>
          <ng-select class="select form-control"
                     [multiple]="true"
                     [items]="profit_centers"
                     [bindLabel]="'label'"
                     [bindValue]="'id'"
                     (change)="filterChanged()"
                     [(ngModel)]="filter.profit_centers"
                     [placeholder]="'Filtrer par cenntre de profit'" ></ng-select>
        </div>
      </div>
      <div class=" flex-column  col-12 col-sm-6 col-lg-3 ">
        <label>Appartenance</label>
        <div>
          <ng-select class="select form-control"
                     [multiple]="true"
                     [items]="memberships"
                     [bindLabel]="'label'"
                     [bindValue]="'id'"
                     (change)="filterChanged()"
                     [(ngModel)]="filter.member_ships"
                     [placeholder]="'Filtrer par appartenance'"></ng-select>
        </div>
      </div>
      <div class=" flex-column  col-12 col-sm-6 col-lg-3 ">
        <label>Rôle</label>
        <div>
          <ng-select class="select form-control"
                     [multiple]="true"
                     [items]="roles"
                     [bindLabel]="'label'"
                     [bindValue]="'id'"
                     (change)="filterChanged()"
                     [(ngModel)]="filter.roles"
                     [placeholder]="'Filtrer par rôles'"></ng-select>
        </div>
      </div>
    </div>
    <div class="filtres row ">
      <div class="flex-column col-12 col-sm-6 col-lg-3  ">
        <label>Etat de facturation</label>
        <div>
          <ng-select class="select form-control"
                     [multiple]="true"
                     [items]="facturation_stats"
                     (change)="filterChanged()"
                     [(ngModel)]="filter.facturation_stats"
                     [bindLabel]="'label'"
                     [bindValue]="'id'"
                     [placeholder]="'Filtrer par état de facturation'" ></ng-select>
        </div>
      </div>
      <div class=" flex-column  col-12 col-sm-6 col-lg-3 ">
        <label>Etat à compléter</label>
        <div>
          <ng-select class="select form-control"
                     [multiple]="true"
                     [items]="states_to_complete"
                     [bindLabel]="'label'"
                     [bindValue]="'id'"
                     (change)="filterChanged()"
                     [(ngModel)]="filter.stats_to_complete"
                     [placeholder]="'Filtrer contrat'" ></ng-select>
        </div>
      </div>
      <div class=" flex-column  col-12 col-sm-6 col-lg-3 ">
        <label>Etat matricule</label>
        <div>
          <ng-select class="select form-control"
                     [multiple]="true"
                     [items]="matricule_stats"
                     [bindLabel]="'label'"
                     [bindValue]="'id'"
                     (change)="filterChanged()"
                     [(ngModel)]="filter.matricule_stats"
                     [placeholder]="'Filtrer par état matricule'"></ng-select>
        </div>
      </div>
      <div class="flex-column col-12 col-sm-6 col-lg-3  ">
        <label>Salarié</label>
        <div>
          <ng-select class="select form-control"
                     [multiple]="true"
                     [items]="personals"
                     (change)="filterChanged()"
                     [(ngModel)]="filter.personals"
                     [bindLabel]="'full_name'"
                     [bindValue]="'id'"
                     [placeholder]="'Filtrer par salarié'" ></ng-select>
        </div>
      </div>
    </div>
    <div class="filtres row">
      <div class="flex-column  col-12 col-sm-6 col-lg-3  block-check ">
        <label class="">Etat de l'utilisateur</label>
        <div class="btn-group btn-group-toggle"
             ngbRadioGroup name="radioBasic"
             (change)="filterChanged()"
             [(ngModel)]="filter.user_stats">
          <label ngbButtonLabel
                 [ngClass]="{'btn-primary': filter.user_stats === true}">
            <input ngbButton type="radio" [value]="true"> Actif
          </label>
          <label ngbButtonLabel class="btn-primary"
                 [ngClass]="{'btn-primary': filter.user_stats === null}">
            <input ngbButton type="radio" [value]="null"> Tous
          </label>
          <label ngbButtonLabel
                 [ngClass]="{'btn-primary': filter.user_stats === false}">
            <input ngbButton type="radio" [value]="false"> Inactif
          </label>
        </div>
      </div>
      <div class="flex-column  col-12 col-sm-6 col-lg-3  block-check ">
        <label class="">Utilisateur virtuel</label>
        <div class="btn-group btn-group-toggle"
             ngbRadioGroup name="radioBasic"
             (change)="filterChanged()"
             [(ngModel)]="filter.is_virtual">
          <label ngbButtonLabel
                 [ngClass]="{'btn-primary': filter.is_virtual === true}">
            <input ngbButton type="radio" [value]="true"> Oui
          </label>
          <label ngbButtonLabel class="btn-primary"
                 [ngClass]="{'btn-primary': filter.is_virtual === null}">
            <input ngbButton type="radio" [value]="null"> Tous
          </label>
          <label ngbButtonLabel
                 [ngClass]="{'btn-primary': filter.is_virtual === false}">
            <input ngbButton type="radio" [value]="false"> Non
          </label>
        </div>
      </div>
    </div>
  </div>
    <div class="sub-header" *ngIf="showFilters || keyword?.length>0">
      <h2 class="main-title">
        Résultats de recherche
      </h2>
    </div>
  <ng-container *ngIf="!loadingData; else loadingTemplate">
    <div class="wrap" *ngIf="users?.length>0; else emptyState" >
      <div class="table-wrapper">
        <ng-container [ngSwitch]="type">
          <ng-container *ngSwitchCase="'general'">
            <table class="table-responsive card-list-table">
              <thead>
                <tr>
                <th>
                  Salarié
                </th>
                <th>
                  Matricule
                </th>
                <th>
                  Profil
                </th>
                <th>
                  Rôle
                </th>
                <th>
                  Centre de profit
                </th>
                <th>
                  Appartenance
                </th>
                <th>
                  Entrée
                </th>
                <th>
                  Sortie
                </th>
                <th>
                  Téléphone
                </th>
                <th>
                  Email
                </th>
                <th>
                  Dernière connexion
                </th>
                <th >Action</th>
              </tr>
              </thead>
              <tbody>
                <tr *ngFor="let user of users"  >
                  <td>
                    <div class="photo-cell" [routerLink]="['/users/details/'+user.id]">
                      <div class="photo">
                        <div class="img-container">
                          <img
                            [attr.src]="user?.photo_profile ? (user.photo_profile |
                        getPhotoFromBackend: ('assets/images/'+(user?.civility === 'Mme' ? 'woman.png': 'man.png')) |
                        async) : ('assets/images/'+(user?.civility === 'Mme' ? 'woman.png': 'man.png'))"
                          />
                        </div>
                      </div>
                      <div class="name">{{user?.full_name}} </div>
                    </div>
                  </td>
                  <td data-title="Numéro de registration" >{{user?.registration_number}}</td>
                  <td data-title="Profile" >{{user?.profile_name}}</td>
                  <td data-title="Rôle" >{{user?.role_name}}</td>
                  <td data-title="Ceentre de profit"  >{{user?.cp_name}}</td>
                  <td data-title="Appartenance" >{{user?.member_ship_name}}</td>
                  <td data-title="Entrée"  >{{user?.entry_date | dateMessage}}</td>
                  <td data-title="Sortie"  >{{user?.end_date | dateMessage}}</td>
                  <td data-title="Telephone portable">{{user?.telephone_portable}}</td>
                  <td data-title="Email">{{user?.email}}</td>
                  <td>{{user?.last_login | timeAgo}} </td>
                  <td>
                    <div class="actions">
                      <i class="icon-eye"
                         data-toggle="tooltip"
                         data-placement="top"
                         (click)="goToUpdateUser(user)"
                         title="Détails"></i>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </ng-container>
          <ng-container *ngSwitchCase="'period_essai'">
            <table class="table-responsive card-list-table">
              <thead>
               <tr>
                <th>
                  Salarié
                </th>
                 <th>
                   Centre de profit
                 </th>
                <th>
                  Matricule
                </th>
                <th>
                  Statut salarié
                </th>
                <th>
                  Date entrée
                </th>
                <th>
                  Date sortie
                </th>
                <th>
                  Ancienneté
                </th>
                <th>
                  Décision
                </th>
                <th>
                  Date de fin de renouvellement
                </th>
                <th>
                  Suivi evolution période d'essai
                </th>
                <th>
                  Date fin période essai
                </th>
                <th>
                  Gestion courrier GP
                </th>
                 <th>
                  Réception bilan PE
                </th>
               </tr>
              </thead>
              <tbody>
              <tr *ngFor="let user of users"  >
                <td>
                  <div class="photo-cell"  [routerLink]="['/users/details/'+user.id]" [queryParams]="{step: 1}">
                    <div class="photo">
                      <div class="img-container">
                        <img
                          [attr.src]="user?.photo_profile ? (user.photo_profile |
                        getPhotoFromBackend: ('assets/images/'+(user?.civility === 'Mme' ? 'woman.png': 'man.png')) |
                        async) : ('assets/images/'+(user?.civility === 'Mme' ? 'woman.png': 'man.png'))"
                        />
                      </div>
                    </div>
                    <div class="name">{{user?.full_name}} </div>
                  </div>
                </td>
                <td data-title="Ceentre de profit" class="tel">{{user?.cp_name}}</td>
                <td data-title="Numéro de registration" >{{user?.registration_number}}</td>
                <td data-title="Numéro de registration" >Statut_test</td>
                <td data-title="Entrée" class="tel">{{user?.entry_date | dateMessage}}</td>
                <td data-title="Sortie" class="tel">{{user?.end_date | dateMessage}}</td>
                <td data-title="Rôle" >{{user?.seniority}}</td>
                <td data-title="Rôle" >decision_test</td>
                <td data-title="Sortie" >date_test</td>
                <td data-title="Appartenance" >
                  Terminé
                </td>
                <td>
                  fin periode
                </td>
                <td>
                  <div class="check-box-btn">
                    <input type="checkbox"
                           class="small-checkbox"
                           id="gestion_courrier_gp"
                           [checked]="user.gestion_courrier_gp"
                           [(ngModel)]="user.gestion_courrier_gp"
                           name="gestion_courrier_gp" />
                  </div>
                </td>
                <td>
                  <div class="check-box-btn">
                    <input type="checkbox"
                           class="small-checkbox"
                           id="reception_bilan_pe"
                           [checked]="user.reception_bilan_pe"
                           [(ngModel)]="user.reception_bilan_pe"
                           name="reception_bilan_pe" />
                  </div>
                </td>
              </tr>
              </tbody>
            </table>
          </ng-container>
          <ng-container *ngSwitchCase="'entretien'">
            <table class="table-responsive card-list-table">
              <thead>
              <tr>
                <th>Salarié</th>
                <th>Matricule</th>
                <th>Société</th>
                <th>Date entrée</th>
                <th>Centre de profit</th>
                <th>Type entretien</th>
                <th>Date théorique</th>
                <th>Date effective</th>
                <th>Etat</th>
                <th>Pièces jointes</th>
                <th style="text-align: right">Actions</th>
              </tr>
              </thead>
              <tbody>
                <tr *ngFor="let user of users"  >
                  <td>
                    <div class="photo-cell"  [routerLink]="['/users/details/'+user.id]" [queryParams]="{step: 2}">
                      <div class="photo">
                        <div class="img-container">
                          <img
                            [attr.src]="user?.photo_profile ? (user.photo_profile |
                          getPhotoFromBackend: ('assets/images/'+(user?.civility === 'Mme' ? 'woman.png': 'man.png')) |
                          async) : ('assets/images/'+(user?.civility === 'Mme' ? 'woman.png': 'man.png'))"
                          />
                        </div>
                      </div>
                      <div class="name">{{user?.full_name}} </div>
                    </div>
                  </td>
                  <td>{{user?.registration_number}}</td>
                  <td>{{user?.entity_name || 'entity_name_test'}}</td>
                  <td>{{user?.entry_date | dateMessage}}</td>
                  <td>{{user?.cp_name}}</td>
                  <td>--</td>
                  <td>--</td>
                  <td>--</td>
                  <td>--</td>
                  <td >
                    <i class="icon-attachment"></i>
                  </td>
                  <td style="padding-right: 0;">
                    <div class="actions">
                      <i class="icon-edit"
                         data-toggle="tooltip"
                         data-placement="top"
                         title="Modifier"></i>&nbsp;&nbsp;
                      <i class="icon-close danger-icon"
                         data-toggle="tooltip"
                         data-placement="top"
                         title="Supprimer"></i>
                    </div>
                  </td>
              </tr>
              </tbody>
            </table>
          </ng-container>
          <ng-container *ngSwitchCase="'formation'">
            <table class="table-responsive card-list-table">
              <thead>
              <tr>
                <th>Nom</th>
                <th>Matricule</th>
                <th>Profil</th>
                <th>Centre de profit</th>
                <th>Email</th>
                <th>Tel</th>
                <th class="icon-cell"></th>
              </tr>
              </thead>
              <tbody>
              <!--                [routerLink]="['/users/info/'+user.id]"  (click)="openModal()"-->
              <tr *ngFor="let user of users"  >
                <td>
                  <div class="photo-cell"  [routerLink]="['/users/details/'+user.id]">
                    <div class="photo">
                      <div class="img-container">
                        <img
                          [attr.src]="user?.photo_profile ? (user.photo_profile |
                      getPhotoFromBackend: ('assets/images/'+(user?.civility === 'Mme' ? 'woman.png': 'man.png')) |
                      async) : ('assets/images/'+(user?.civility === 'Mme' ? 'woman.png': 'man.png'))"
                        />
                      </div>
                    </div>
                    <div class="name">{{user?.full_name}} </div>
                  </div>
                </td>
                <td>{{user?.registration_number}}</td>
                <td data-title="Email" >{{user?.profile_name}}</td>
                <td data-title="Téléphonne" class="tel">{{user?.cp_name}}</td>
                <td data-title="Profil">{{user?.email_professional}}</td>
                <td data-title="Centre d'interêt">{{user?.telephone_professional}}</td>

                <!--                        <td data-title="Date de création" class="text-center">{{user?.created_at | defaultFormat }}</td>-->
                <!--                        <td data-title="Dernière activité" class="lightcell">{{user?.last_activity | timeAgo }}</td>-->
                <td >
                  <!--                            appStopPropagation-->
                  <div class="actions">
                    <i class="icon-eye"
                       data-toggle="tooltip"
                       data-placement="top"
                       (click)="goToUpdateUser(user)"
                       title="Détails"></i>
                    <!--                              <span class="d-none d-lg-flex">Détails</span>-->

                    <!--                                <ng-container *ngIf="!user.blocked_at; else unlock">-->
                    <!--                                    <i class="fa fa-lock"-->
                    <!--                                       data-toggle="tooltip"-->
                    <!--                                       data-placement="top"-->
                    <!--                                       (click)="askBlockUser(user.id)"-->
                    <!--                                       title="{{'DISABLE ACCOUNT' | translate}}"></i>-->
                    <!--                                </ng-container>-->
                    <!--                                <ng-template #unlock>-->
                    <!--                                    <i class="fa fa-unlock"-->
                    <!--                                       data-toggle="tooltip"-->
                    <!--                                       data-placement="top"-->
                    <!--                                       (click)="askUnBlockUser(user.id)"-->
                    <!--                                       title="{{'ENABLE ACCOUNT' | translate}}"></i>-->
                    <!--                                </ng-template>-->
                    <!--                                <i class="fa fa-trash"-->
                    <!--                                   (click)="archive(user.id)"-->
                    <!--                                   data-toggle="tooltip"-->
                    <!--                                   data-placement="top"-->
                    <!--                                   title="{{'DELETE' | translate}}"></i>-->
                  </div>
                </td>
              </tr>
              </tbody>
            </table>
          </ng-container>
          <ng-container *ngSwitchCase="'visite_medicale'">
            <table class="table-responsive card-list-table">
              <thead>
              <tr>
                <th>
                  Salarié
                </th>
                <th>
                  Matricule
                </th>
                <th>
                  Société
                </th>
                <th>
                  Siège
                </th>
                <th>
                  Centre médical
                </th>
                <th>
                  Date dernière visite médicale
                </th>
                <th>
                  Date prochaine visite médicale
                </th>
                <th>
                  Convocation envoyée
                </th>
              </tr>
              </thead>
              <tbody>
              <!--                [routerLink]="['/users/info/'+user.id]"  (click)="openModal()"-->
              <tr *ngFor="let user of users"  >
                <td>
                  <div class="photo-cell"  [routerLink]="['/users/details/'+user.id]" [queryParams]="{step: 3}">
                    <div class="photo">
                      <div class="img-container">
                        <img
                          [attr.src]="user?.photo_profile ? (user.photo_profile |
                      getPhotoFromBackend: ('assets/images/'+(user?.civility === 'Mme' ? 'woman.png': 'man.png')) |
                      async) : ('assets/images/'+(user?.civility === 'Mme' ? 'woman.png': 'man.png'))"
                        />
                      </div>
                    </div>
                    <div class="name">{{user?.full_name}} </div>
                  </div>
                </td>
                <td>{{user?.registration_number}}</td>
                <td>{{user?.entity_name || 'entity_name'}}</td>
                <td>{{user?.siege || 'siege_name'}}</td>
                <td>{{user?.medical_center || 'medical_center'}} &nbsp;<i class="icon-edit-bold"></i></td>
                <td></td>
                <td>
                  <span class="link">Ajouter une date</span>
                </td>
                <td>
                  <div class="check-box-btn">
                    <input type="checkbox"
                           class="small-checkbox"
                           id="invitation_sent"
                           [checked]="user.invitation_sent"
                           [(ngModel)]="user.invitation_sent"
                           name="invitation_sent" >
                  </div>
                </td>
              </tr>
              </tbody>
            </table>
          </ng-container>
          <ng-container *ngSwitchCase="'entree'">
            <table class="table-responsive card-list-table">
              <thead>
                <tr>
                  <th></th>
                  <th></th>
                  <th></th>
                  <th></th>
                  <th></th>
                  <th></th>
                  <th></th>
                  <th></th>
                  <th colspan="2" class="category-cell">Salarié étranger</th>
                  <th></th>
                  <th></th>
                  <th></th>
                  <ng-container *ngFor="let extraColumn of getActiveColumns('columns_entree')">
                    <th>
                    </th>
                  </ng-container>
                </tr>
                <tr>
                  <th>
                    Salarié
                  </th>
                  <th>
                    Matricules
                  </th>
                  <th>
                    Société
                  </th>
                  <th>
                    Siège
                  </th>
                  <th>
                    Date d'entrée
                  </th>
                  <th>
                    Centre de profit
                  </th>
                  <th>
                    Type de contrat
                  </th>
                  <th>
                    Statut
                  </th>
                  <th>
                    Vérification TS préfecture
                  </th>
                  <th>
                    Demande d'authorisation de travail
                  </th>
                  <th>
                    Contrat signé
                  </th>
                  <th>
                    Annulé?
                  </th>
                  <ng-container *ngFor="let extraColumn of getActiveColumns('columns_entree')">
                      <th>
                        {{extraColumn.label}}
                      </th>
                  </ng-container>
                  <th style="text-align: right" class="sticky">
                    <i class="primary-icon icon-add pointer" [matMenuTriggerFor]="statusMenu"></i>
                  </th>
                  <mat-menu #statusMenu="matMenu" [class]="'profile-menu'">
                    <div mat-menu-item class="dropdown-item" *ngFor="let item of columns_entree" (click)="$event.stopPropagation()">
                      <div class="check-box-btn">
                        <input type="checkbox"
                               id="{{item.id}}"
                               [(ngModel)]="item.checked"
                               (change)="onCheckChange($event, item, statusMenu)"
                               name="{{item.id}}" >
                        <label for="{{item.id}}" >{{item.label}}</label>
                      </div>
                    </div>
                    <div mat-menu-item class="dropdown-item" (click)="$event.stopPropagation();">
                      <div class="check-box-btn" >
                        <input type="checkbox"
                               id="select_all"
                               [value]="'select_all'"
                               (change)="selectAllColumns()"
                               name="select_all" >
                        <label for="select_all" class="blue-text">Tout séléctionner</label>
                      </div>
                    </div>
                  </mat-menu>
                  <mat-menu #placeholder="matMenu" class="placeholder"></mat-menu>
                </tr>
              </thead>
              <tbody>
              <!--                [routerLink]="['/users/info/'+user.id]"  (click)="openModal()"-->
              <tr *ngFor="let user of users">
                <td>
                  <div class="photo-cell"  [routerLink]="['/users/details/'+user.id]" [queryParams]="{step: 0}">
                    <div class="photo">
                      <div class="img-container">
                        <img
                          [attr.src]="user?.photo_profile ? (user.photo_profile |
                      getPhotoFromBackend: ('assets/images/'+(user?.civility === 'Mme' ? 'woman.png': 'man.png')) |
                      async) : ('assets/images/'+(user?.civility === 'Mme' ? 'woman.png': 'man.png'))"
                        />
                      </div>
                    </div>
                    <div class="name">{{user?.full_name}} </div>
                  </div>
                </td>
                <td>{{user?.registration_number}}</td>
                <td data-title="Entité" >{{user?.entity_name || 'test'}}</td>
                <td data-title="Siege">{{user?.siege_name || 'test'}}</td>
                <td data-title="date d'entrée">{{(user?.start_date | dateMessage) || 'test'}}</td>
                <td data-title="Centre d'interêt">{{user?.cp_name}}</td>
                <td data-title="Type de contrat">{{user?.contract_type_name || 'test'}}</td>
                <td data-title="Type de contrat">{{user?.statut || 'test'}}</td>
                <td data-title="Type de contrat">
                  <div class="check-box-btn">
                    <input type="checkbox"
                           class="small-checkbox"
                           id="with_inactive_cp"
                           [checked]="user.verification_ts_prefecture"
                           [(ngModel)]="user.verification_ts_prefecture"
                           name="verification_ts_prefecture" >
                  </div>
                </td>
                <td data-title="Type de contrat">
                  &nbsp;
                </td>
                <td data-title="Type de contrat">
                  <div class="check-box-btn">
                    <input type="checkbox"
                           class="small-checkbox"
                           id="is_signed_contract"
                           [checked]="user.is_signed_contract"
                           [(ngModel)]="user.is_signed_contract"
                           name="is_signed_contract" >
                  </div>
                </td>
                <td data-title="Type de contrat">
                  <div class="check-box-btn">
                    <input type="checkbox"
                           class="small-checkbox"
                           id="is_canceled"
                           [checked]="user.is_canceled"
                           [(ngModel)]="user.is_canceled"
                           name="is_canceled" >
                  </div>
                </td>

                <ng-container *ngFor="let extraColumn of getActiveColumns('columns_entree')">
                    <td>
                      {{extraColumn.label+'_value'}}
                    </td>
                </ng-container>
                <td >
                  <!--                            appStopPropagation-->
                  <div class="actions">

                    <!--                              <span class="d-none d-lg-flex">Détails</span>-->

                    <!--                                <ng-container *ngIf="!user.blocked_at; else unlock">-->
                    <!--                                    <i class="fa fa-lock"-->
                    <!--                                       data-toggle="tooltip"-->
                    <!--                                       data-placement="top"-->
                    <!--                                       (click)="askBlockUser(user.id)"-->
                    <!--                                       title="{{'DISABLE ACCOUNT' | translate}}"></i>-->
                    <!--                                </ng-container>-->
                    <!--                                <ng-template #unlock>-->
                    <!--                                    <i class="fa fa-unlock"-->
                    <!--                                       data-toggle="tooltip"-->
                    <!--                                       data-placement="top"-->
                    <!--                                       (click)="askUnBlockUser(user.id)"-->
                    <!--                                       title="{{'ENABLE ACCOUNT' | translate}}"></i>-->
                    <!--                                </ng-template>-->
                    <!--                                <i class="fa fa-trash"-->
                    <!--                                   (click)="archive(user.id)"-->
                    <!--                                   data-toggle="tooltip"-->
                    <!--                                   data-placement="top"-->
                    <!--                                   title="{{'DELETE' | translate}}"></i>-->
                  </div>
                </td>
              </tr>
              </tbody>
            </table>
          </ng-container>
          <ng-container *ngSwitchCase="'sortie'">
            <table class="table-responsive card-list-table">
              <thead>
                <tr>
                <th>
                  Salarié
                </th>
                <th>
                  Matricules
                </th>
                <th>
                  Société
                </th>
                <th>
                  Siège
                </th>
                <th>
                  Date d'entrée
                </th>
                <th>
                  Centre de profit
                </th>
                <th>
                  Date de reception du courier
                </th>
                <th>
                  Motif
                </th>
                <th>
                  Fin normal préavis
                </th>
                <th>
                  Date limite de réponse
                </th>
                <th>
                  Date de sortie
                </th>
                <th>
                  Mail direction + BM
                </th>
                <th>
                  Mail admin
                </th>
                <th>
                  Courrier réponse
                </th>
                <th>
                  Radiation ATS
                </th>
                <th>
                  Date d'envoi STC
                </th>
                <th>
                  Envoi recommandé N°
                </th>
                <th>
                  Sortie SIRH
                </th>
                <th>
                  Radiation APICIL
                </th>
                <th>
                  Virement Amandine
                </th>
                <th>
                  Scan docs
                </th>
<!--                <ng-container *ngFor="let extraColumn of getActiveColumns('columns_sortie')">-->
<!--                  <th>-->
<!--                    {{extraColumn.label}}-->
<!--                  </th>-->
<!--                </ng-container>-->
<!--                <th style="text-align: right" class="sticky">-->
<!--                  <i class="primary-icon icon-add pointer" [matMenuTriggerFor]="statusMenu"></i>-->
<!--                </th>-->
<!--                <mat-menu #statusMenu="matMenu" [class]="'profile-menu'">-->
<!--                  <div mat-menu-item class="dropdown-item" *ngFor="let item of columns_sortie" (click)="$event.stopPropagation()">-->
<!--                    <div class="check-box-btn">-->
<!--                      <input type="checkbox"-->
<!--                             id="{{item.id}}"-->
<!--                             [(ngModel)]="item.checked"-->
<!--                             (change)="onCheckChange($event, item, statusMenu)"-->
<!--                             name="{{item.id}}" >-->
<!--                      <label for="{{item.id}}" >{{item.label}}</label>-->
<!--                    </div>-->
<!--                  </div>-->
<!--                  <div mat-menu-item class="dropdown-item" (click)="$event.stopPropagation();">-->
<!--                    <div class="check-box-btn" >-->
<!--                      <input type="checkbox"-->
<!--                             id="select_all"-->
<!--                             [value]="'select_all'"-->
<!--                             (change)="selectAllColumns()"-->
<!--                             name="select_all" >-->
<!--                      <label for="select_all" class="blue-text">Tout séléctionner</label>-->
<!--                    </div>-->
<!--                  </div>-->
<!--                </mat-menu>-->
<!--                <mat-menu #placeholder="matMenu" class="placeholder"></mat-menu>-->
              </tr>
              </thead>
              <tbody>
                <tr *ngFor="let user of users" >
                  <td>
                    <div class="photo-cell"  [routerLink]="['/users/details/'+user.id]" [queryParams]="{step: 4}">
                      <div class="photo">
                        <div class="img-container">
                          <img
                            [attr.src]="user?.photo_profile ? (user.photo_profile |
                      getPhotoFromBackend: ('assets/images/'+(user?.civility === 'Mme' ? 'woman.png': 'man.png')) |
                      async) : ('assets/images/'+(user?.civility === 'Mme' ? 'woman.png': 'man.png'))"
                          />
                        </div>
                      </div>
                      <div class="name">{{user?.full_name}} </div>
                    </div>
                  </td>
                  <td>{{user?.registration_number}}</td>
                  <td data-title="Entité" >{{user?.entity_name || 'test'}}</td>
                  <td data-title="Siege">{{user?.siege_name || 'test'}}</td>
                  <td data-title="date d'entrée">{{(user?.start_date | dateMessage) || 'test'}}</td>
                  <td data-title="Centre d'interêt">{{user?.cp_name}}</td>
                  <td>
                   date_test
                  </td>
                  <td>
                    <div class="blue-text">
                      Demission <i class="icon-arrow-down primary-icon"></i>
                    </div>
                  </td>
                  <td>
                    date_test
                  </td>
                  <td>
                    date_test
                  </td>
                  <td>
                    date_test
                  </td>
                  <td>
                    <div class="check-box-btn">
                      <input type="checkbox"
                             class="small-checkbox"
                             id="mail_direction_bm"
                             [checked]="user.mail_direction_bm"
                             [(ngModel)]="user.mail_direction_bm"
                             name="mail_direction_bm" >
                    </div>
                  </td>
                  <td>
                    <div class="check-box-btn">
                      <input type="checkbox"
                             class="small-checkbox"
                             id="mail_admin"
                             [checked]="user.mail_admin"
                             [(ngModel)]="user.mail_admin"
                             name="mail_admin" >
                    </div>
                  </td>
                  <td>
                    <div class="check-box-btn">
                      <input type="checkbox"
                             class="small-checkbox"
                             id="courrier_response"
                             [checked]="user.courrier_response"
                             [(ngModel)]="user.courrier_response"
                             name="courrier_response" >
                    </div>
                  </td>
                  <td>
                    <div class="check-box-btn">
                      <input type="checkbox"
                             class="small-checkbox"
                             id="radiation_ats"
                             [checked]="user.radiation_ats"
                             [(ngModel)]="user.radiation_ats"
                             name="radiation_ats" >
                    </div>
                  </td>
                  <td>
                    <div class="check-box-btn">
                      <input type="checkbox"
                             class="small-checkbox"
                             id="date_envoie_stc"
                             [checked]="user.date_envoie_stc"
                             [(ngModel)]="user.date_envoie_stc"
                             name="date_envoie_stc" >
                    </div>
                  </td>
                  <td>
                    <div class="check-box-btn">
                      <input type="checkbox"
                             class="small-checkbox"
                             id="envoi_recommande_number"
                             [checked]="user.envoi_recommande_number"
                             [(ngModel)]="user.envoi_recommande_number"
                             name="envoi_recommande_number" >
                    </div>
                  </td>
                  <td>
                    <div class="check-box-btn">
                      <input type="checkbox"
                             class="small-checkbox"
                             id="sortie_sirh"
                             [checked]="user.sortie_sirh"
                             [(ngModel)]="user.sortie_sirh"
                             name="sortie_sirh" >
                    </div>
                  </td>
                  <td>
                    <div class="check-box-btn">
                      <input type="checkbox"
                             class="small-checkbox"
                             id="radiation_apicil"
                             [checked]="user.radiation_apicil"
                             [(ngModel)]="user.radiation_apicil"
                             name="radiation_apicil" >
                    </div>
                  </td>
                  <td>
                    <div class="check-box-btn">
                      <input type="checkbox"
                             class="small-checkbox"
                             id="virement_amandine"
                             [checked]="user.virement_amandine"
                             [(ngModel)]="user.virement_amandine"
                             name="virement_amandine" >
                    </div>
                  </td>
                  <th>
                    <i class="icon-attachment primary-icon"></i>
                  </th>
<!--                  <ng-container *ngFor="let extraColumn of getActiveColumns('columns_sortie')">-->
<!--                    <td>-->
<!--                      {{extraColumn.label+'_value'}}-->
<!--                    </td>-->
<!--                  </ng-container>-->
                </tr>
              </tbody>
            </table>
          </ng-container>
          <ng-container *ngSwitchDefault>
            <ng-container *ngTemplateOutlet="emptyState"></ng-container>
          </ng-container>
        </ng-container>
      </div>
    </div>
    <div class="footer" *ngIf="users?.length>0">

      <app-pagination name="pagination"
                      (change)="changePagination()"
                      [(ngModel)]="pagination"
                      ngDefaultControl>
      </app-pagination>
      <div class="right-buttons flex-end">
        <app-button
          [text]="'Importer'"
          [type]="'tertiary_inverse'"
          [iconLeft]="'icon-file'"
          [customStyle]="{'white-space': 'nowrap'}"
        ></app-button>&nbsp;
        <app-button
          [text]="'Exporter'"
          [type]="'tertiary_inverse'"
          [iconLeft]="'icon-file'"
          [customStyle]="{'white-space': 'nowrap'}"
        ></app-button>
      </div>
    </div>
  </ng-container>
</div>

<ng-template #emptyState>
  <app-centred-message
    [image]="'images/user_empty_state.svg'"
    [message]="( 'Aucun utilisateur trouvé pour le moment' | translate )"
  ></app-centred-message>
</ng-template>

<ng-template #loadingTemplate>
  <div class="d-flex w-100 h-100 align-items-center justify-content-center">
    <img src="assets/images/loading.svg" style="height: 100px;" />
  </div>
</ng-template>
